<?xml version="1.0" ?>
<robot name="scout_description">

    <link name="chassis_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/base_link.dae" />
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <box size="0.9250000 0.380000 0.210000"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="40" />
            <origin xyz="0.0 0.0 0.0" />
            <inertia ixx="2.288641" ixy="0" ixz="0" iyy="5.103976" iyz="0" izz="3.431465" />
        </inertial>

    </link>

    <link name="base_link"/>

    <joint name="chassis_joint" type="fixed">
        <origin rpy="0 0 0" xyz="0 0 -0.23479"/>
        <parent link="base_link"/>
        <child link="chassis_link"/>
    </joint>
    
    <link name="front_right_wheel_link">
        <inertial>
            <mass value="3"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.7171" ixy="0" ixz="0" iyy="0.1361" iyz="0" izz="0.7171" />
        </inertial>
        <visual>
            <origin rpy="-1.570795 0 0" xyz="0 0 0"/>
            <geometry>
                <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/wheel_type1.dae"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.16459" length="0.11653" /> 
            </geometry>
            <contact>
                <ode>
                    <min_depth>0.001</min_depth>
                </ode>
            </contact>
        </collision>
    </link>


    <joint name="front_right_wheel" type="continuous">
        <parent link="chassis_link"/>
        <child link="front_right_wheel_link"/>
        <origin rpy="1.570795 0 0" xyz="0.249 -0.29153 -0.0702"/>
        <axis rpy="0 0 0" xyz="0 0 -1"/>
        <limit effort="200" velocity="1.5"/>
        <dynamics damping="0.0" friction="20" />
    </joint>
   
   
    <link name="front_left_wheel_link">
        <inertial>
            <mass value="3"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.7171" ixy="0" ixz="0" iyy="0.1361" iyz="0" izz="0.7171" />
        </inertial>
        <visual>
            <origin rpy="1.570795 0 0" xyz="0 0 0"/>
            <geometry>
                <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/wheel_type2.dae"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.16459" length="0.11653"/>
            </geometry>
            <contact>
                <ode>
                    <min_depth>0.001</min_depth>
                </ode>
            </contact>            
        </collision>
    </link>


    <joint name="front_left_wheel" type="continuous">
        <parent link="chassis_link"/>
        <child link="front_left_wheel_link"/>
        <origin rpy="-1.570795 0 0" xyz="0.249 0.29153 -0.0702"/>
        <axis rpy="0 0 0" xyz="0 0 1"/>
        <limit effort="200" velocity="1.5"/>
        <dynamics damping="0.0" friction="20" />
    </joint>
    
    <link name="rear_left_wheel_link">
        <inertial>
            <mass value="3"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.7171" ixy="0" ixz="0" iyy="0.1361" iyz="0" izz="0.7171" />
        </inertial>
        <visual>
            <origin rpy="1.570795 0 0" xyz="0 0 0"/>
            <geometry>
                <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/wheel_type1.dae"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.16459" length="0.11653"/> 
            </geometry>
            <contact>
                <ode>
                    <min_depth>0.001</min_depth>
                </ode>
            </contact>            
        </collision>
    </link>


    <joint name="rear_left_wheel" type="continuous">
        <parent link="chassis_link"/>
        <child link="rear_left_wheel_link"/>
        <origin rpy="-1.570795 0 0" xyz="-0.249 0.29153 -0.0702"/>
        <axis rpy="0 0 0" xyz="0 0 1"/>
        <limit effort="200" velocity="1.5" />
        <dynamics damping="0.0" friction="20" />
    </joint>
    
    <link name="rear_right_wheel_link">
        <inertial>
            <mass value="3"/>
            <origin xyz="0 0 0"/>
            <inertia ixx="0.7171" ixy="0" ixz="0" iyy="0.1361" iyz="0" izz="0.7171" />
        </inertial>
        <visual>
            <origin rpy="-1.570795 0 0" xyz="0 0 0"/>
            <geometry>
                <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/wheel_type2.dae"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
               <cylinder radius="0.16459" length="0.11653"/> 
            </geometry>
            <contact>
                <ode>
                    <min_depth>0.001</min_depth>
                </ode>
            </contact>
        </collision>
    </link>
    

    <joint name="rear_right_wheel" type="continuous">
        <parent link="chassis_link"/>
        <child link="rear_right_wheel_link"/>
        <origin rpy="1.570795 0 0" xyz="-0.249 -0.29153 -0.0702"/>
        <axis rpy="0 0 0" xyz="0 0 -1"/>
        <limit effort="200" velocity="1.5"/>
        <dynamics damping="0.0" friction="20" />
    </joint>


    <link name="os_sensor_link">
        <visual>
            <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/os1_64.stl" scale="1.5 1.5 1.5"/>
            </geometry>
            <material name="Gray">
                <color rgba="0.5 0.5 0.5 1" />
            </material>
        </visual>
        
    </link>

    <joint name="os_sensor" type="fixed">
        <parent link="chassis_link"/>
        <child link="os_sensor_link"/>
        <origin rpy="0 0 0" xyz="0.1 0.0 0.714"/>
    </joint>

    <gazebo reference="os_sensor_link">

        <sensor name="laser" type="ray">
            <pose> 0 0 0 0 0 0 </pose>
            <visualize>true</visualize>
            <update_rate>10</update_rate>
            <ray>
                <scan>
                    <horizontal>
                        <samples>360</samples>
                        <min_angle>-3.14</min_angle>
                        <max_angle>3.14</max_angle>
                    </horizontal>
                </scan>
                <range>
                    <min>0.1</min>
                    <max>12</max>
                </range>
            </ray>
            <plugin name="laser_controller" filename="libgazebo_ros_ray_sensor.so">
                <ros>
                    <argument>~/out:=scan</argument>
                </ros>
                <output_type>sensor_msgs/LaserScan</output_type>
                <frame_name>os_sensor_link</frame_name>
            </plugin>
        </sensor>
    </gazebo>

    <link name="imu_sensor_link">
          <visual>
              <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
              <geometry>
                  <mesh filename="file:///home/marco/4d_thesis/src/scout_2/meshes/laser_link.stl" scale="1.5 1.5 1.5"/>
              </geometry>
              <material name="Gray">
                  <color rgba="0.5 0.5 0.5 1" />
              </material>
          </visual>
    </link>

    <joint name="imu_sensor" type="fixed">
        <parent link="chassis_link"/>
        <child link="imu_sensor_link"/>
        <origin rpy="0 0 0" xyz="0.0 0.0 0.50"/>
    </joint>

    <gazebo reference="imu_sensor_link">
      <sensor name="imu" type="imu">
        <always_on>true</always_on>
        <update_rate>100</update_rate>
        <visualize>true</visualize>
        <imu>
          <angular_velocity>
              <x>
              <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>2e-4</stddev>
                  <bias_mean>0.0000075</bias_mean>
                  <bias_stddev>0.0000008</bias_stddev>
                </noise>
              </x>
              <y>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>2e-4</stddev>
                  <bias_mean>0.0000075</bias_mean>
                  <bias_stddev>0.0000008</bias_stddev>
                </noise>
              </y>
              <z>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>2e-4</stddev>
                  <bias_mean>0.0000075</bias_mean>
                  <bias_stddev>0.0000008</bias_stddev>
                </noise>
              </z>
            </angular_velocity>
            <linear_acceleration>
              <x>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>1.7e-2</stddev>
                  <bias_mean>0.1</bias_mean>
                  <bias_stddev>0.001</bias_stddev>
                </noise>
              </x>
              <y>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>1.7e-2</stddev>
                  <bias_mean>0.1</bias_mean>
                  <bias_stddev>0.001</bias_stddev>
                </noise>
              </y>
              <z>
                <noise type="gaussian">
                  <mean>0.0</mean>
                  <stddev>1.7e-2</stddev>
                  <bias_mean>0.1</bias_mean>
                  <bias_stddev>0.001</bias_stddev>
                </noise>
              </z>
            </linear_acceleration>
          </imu>
        <plugin name="imu_controller" filename="libgazebo_ros_imu_sensor.so">
          <ros>
            <argument>~/out:=imu</argument>.
          </ros>
          <initial_orientation_as_reference>false</initial_orientation_as_reference>
        </plugin>
      </sensor>
    </gazebo>


    <link name="gps_link"></link>

    <joint name="gps_sensor" type="fixed">
        <parent link="chassis_link"/>
        <child link="gps_link"/>
        <origin rpy="0 0 0" xyz="0.0 0.0 0.40"/>
    </joint>

    <gazebo reference="gps_link">
      <sensor name="scout_gps" type="gps">
        <always_on>true</always_on>
        <update_rate>10</update_rate>
        <pose>0 0 0 0 0 0</pose>
        <gps>
          <position_sensing>
            <horizontal>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.01</stddev>
              </noise>
            </horizontal>
            <vertical>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.01</stddev>
              </noise>
            </vertical>
          </position_sensing>
        </gps>
        <plugin name="gps_controller" filename="libgazebo_ros_gps_sensor.so">
          <ros>
            <remapping>~/out:=/gps/fix</remapping>
          </ros>
        </plugin>
      </sensor>
    </gazebo>


   
</robot>
